# Laravelレビュー対策①
## Todo一覧機能
### Todoモデルのallメソッドで実行しているSQLは何か
- todoテーブルのレコードを全件取得しています。
SQL文でいうと
```'SELECT * FROM todos;```

### Todoモデルのallメソッドの返り値は何か
- Illuminate\Database\Eloquent\Collectionクラスのインスタンス(連想配列)

### 配列の代わりにCollectionクラスを使用するメリット
- todoテーブルのレコード情報とtodoインスタンスの情報が対応しているので扱いやすい。また、Collectionクラスには多くのメソッドが格納されており、用途に合わせてメソッドを使用することができるのがメリットです。

### view関数の第1・第2引数の指定と何をしているか
- 第1引数では表示させたいブレードファイルの指定をしています。
- 第2引数ではblade内で使用したい変数名と代入したい値を入れます。

### index.blade.phpの$todoList・$todoに代入されているものは何か
- $todoListにはDBから取得したtodoテーブルのレコードが全件入っています。
- $todoにはDBから取得したtodoテーブル内のレコード（単体）が入っています。

## Todo作成機能
### Requestクラスのallメソッドは何をしているか
- input()メソッドでは投稿内容(content)しか取得できなかったが、今後フォームの記入欄が増え名前や年齢などの項目が増えた際に->all()メソッドを使用することですべての情報を取得することができます。

### fillメソッドは何をしているか
- requestクラスのallメソッドで取得した連想配列をtodoインスタンスに代入しています。

### $fillableは何のために設定しているか
- fillメソッドで一括代入するとデベロッパーツールで偽造が可能になってしまいユーザーID等を偽造される可能性があります。
偽造を防ぎたい項目はfillableメソッドで指定しなければ一括代入の対象から外れるため、防ぐことができます。

### saveメソッドで実行しているSQLは何か
- 'INSERT INTO todos (content) VALUES ($content)';

### redirect()->route()は何をしているか
- ```redirect()```メソッドでリダイレクト処理をします。```route()```でリダイレクト先を指定します。
web.phpで名前付けしている```Route::get('/todo', 'TodoController@index')->name('todo.index');```を指定しています。

## その他
### テーブル構成をマイグレーションファイルで管理するメリット
- SQL文を使用せずにDBの管理を行うことができる。
- phpファイルで共有ができる

### マイグレーションファイルのup()、down()は何のコマンドを実行した時に呼び出されるのか
- php artisan migrate
- php artisan migrate:rollback

### Seederクラスの役割は何か
- テストデータなど開発者がDBに直接データを入力するための操作

### route関数の引数・返り値・使用するメリット
- URLと使用したいページへ行くためメソッド
- URL
- 名前を指定することでURLを記載する必要がなくなり再利用が高まることと、関数にまとめることで保守性が高くなります。

### @extends・@section・@yieldの関係性とbladeを分割するメリット
- ファイルを分割し、同じ記述部分をまとめることで今後ページを増やした時にも使用できるため再利用性が高まる点と共通部分で修正や変更が起きたときに一括で修正ができるため保守性が向上する。

### @csrfは何のための記述か
- CSRF対策するため、トークンを発行・照合している

### {{ }}とは
- bladeでは、PHPを記述する際に```{{ }}```を使用し、この中の記述はPHPとして処理されます。
```{!! !!}```との違いは```{{ }}```はエスケープ処理を同時にしてくれ、```{!! !!}```はエスケープ処理を実行しないという違いがあります。


### @csrf は何をしている
```<meta name="csrf-token" content="{{ csrf_token() }}">```で生成したトークンをフォームのpost情報に付与している
post情報に直接付与することによってLaravelがリクエストに対し判断します。
inputタグの生成トークンをバリューとして付与する

### fillメソッドは何をしているのか
$inputs内の情報を一括代入をしているメソッドです。fillableは代入する引数を制限します。
ここでcontentを指定していないとカラムが設定されていないトークンを代入しようとしてしまうためエラーが発生してしまう。

### saveメソッド
fillメソッドで一括代入されたデータをデータベースに保存します。
fillabelはなりすましを防ぐとことできる
ユーザーIDfillで代入するのではなくコントローラー側で登録する必要がある


